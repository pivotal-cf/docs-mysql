---
title: Preparing for multi-site replication
owner: MySQL
---

<strong><%= modified_date %></strong>

This topic tells you how to prepare foundations for
multi-site replication using <%= vars.product_full %>.

For information about multi-site architecture,
see [About multi-site replication](./about-multi-site.html).

##<a id='prerequisites'></a> Prerequisites

Before you configure multi-site replication for <%= vars.product_short %>, you must
confirm that you have done the following:

1. Created two <%= vars.app_runtime_full %> (<%= vars.app_runtime_abbr %>) foundations that support
      a current version of <%= vars.product_short %>.

1. Deployed both foundations. 
   1. **Routable Foundations**: the leader and follower service instances must be
   able to connect to each other on their respective IP addresses.
   You must verify that the CIDR ranges for the leader and follower nodes do not overlap.
   1. **Non-routable Foundations**: follow the steps provided in [Enabling Service-Gateway Access](./enable-service-gateway.html). For more details on the architecture see <a href="./about-multi-site.html#enable-external-access">Enable External Access</a> 

1. Determined which of the following disaster recovery strategies you want to use for your foundations:
    For more information, see [About active-passive topology](./about-multi-site.html#active-passive).
      and [About App-Layer Active-Active topology](./about-multi-site.html#active-active).

1. Configured a global DNS load balancer to point to the two <%= vars.app_runtime_abbr %> foundations
and their local load balancers.
For more information, see [Configure your GLB](https://docs.vmware.com/en/VMware-Tanzu-Operations-Manager/3.0/vmware-tanzu-ops-manager/refarch-global-dns-lb.html).

## <a id='enable'></a> Enable Multi-Site replication

After two <%= vars.app_runtime_abbr %> foundations are created, you can enable multi-site replication by
doing the following:

1. Configure networking rules.
For more information on network rules, see [Required networking rules for multi-site replication](./about.html#multi-site-ports).

1. Enable TLS for both foundations. When you paste the contents of your TLS CA certificate in [Preparing for TLS](./prepare-tls.html), paste both TLS CA certificates as shown in the following image:

    ![alt-text="On the Security pane in the MySQL tile, the TLS CA certificates for the two different
foundations are in the Trusted Certificates field.
    The certificate for foundation 2 is on a new line directly after the certificate
for foundation 1."](./images/multi-site-ca.png)

1. Configure a <%= vars.single_leader_plan_lc %> plan on both foundations. See
[Configure service plans](./install-config.html#active).

1. If you want to enable developers to use high-availability instances as multi-site leaders, configure a high-availability
plan on both foundations. Note you must assign the same Availability Zones (AZs) to both your high-availability plan and
any <%= vars.single_leader_plan_lc %>. For more information see [Configuring Service Plans](install-config.html#configuring-service-plans).
